---
id: mapValues
title: mapValues
description: 'Creates an object with the same keys as object and values generated by running each property through iteratee'
---

# `mapValues`

åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œé€šè¿‡è¿­ä»£å‡½æ•°è½¬æ¢æ¯ä¸ªå±æ€§çš„å€¼ï¼Œä¿æŒé”®åä¸å˜ã€‚

## è¯­æ³•

```typescript
function mapValues<T extends object, U>(
  obj: T,
  iteratee: (value: T[keyof T], key: keyof T, obj: T) => U,
): Record<keyof T, U>;
```

## å‚æ•°

| å‚æ•°å     | ç±»å‹                     | å¿…å¡« | é»˜è®¤å€¼ | æè¿°                         |
| ---------- | ------------------------ | ---- | ------ | ---------------------------- |
| `obj`      | `T extends object`       | âœ…   | -      | æºå¯¹è±¡                       |
| `iteratee` | `(value, key, obj) => U` | âœ…   | -      | ä¸ºæ¯ä¸ªå±æ€§ç”Ÿæˆæ–°å€¼çš„è¿­ä»£å‡½æ•° |

## è¿”å›å€¼

- **ç±»å‹**: `Record<keyof T, U>`
- **æè¿°**: å€¼å·²è½¬æ¢çš„æ–°å¯¹è±¡

## ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

```typescript
import { mapValues } from '@rabjs/kit';

// ç¤ºä¾‹1: å°†æ‰€æœ‰å€¼ä¹˜ä»¥ 2
const numbers = { a: 1, b: 2, c: 3 };
const doubled = mapValues(numbers, (value) => value * 2);
console.log(doubled); // { a: 2, b: 4, c: 6 }

// ç¤ºä¾‹2: å°†æ‰€æœ‰å€¼è½¬ä¸ºå­—ç¬¦ä¸²
const mixed = { id: 1, name: 'John', active: true };
const strings = mapValues(mixed, (value) => String(value));
console.log(strings); // { id: '1', name: 'John', active: 'true' }

// ç¤ºä¾‹3: æ¡ä»¶è½¬æ¢
const scores = { math: 95, english: 88, science: 92 };
const grades = mapValues(scores, (score) => {
  if (score >= 90) return 'A';
  if (score >= 80) return 'B';
  return 'C';
});
console.log(grades); // { math: 'A', english: 'B', science: 'A' }
```

### é«˜çº§ç”¨æ³•

```typescript
// ç¤ºä¾‹4: åŸºäºé”®çš„è½¬æ¢
const config = { timeout: 5000, retries: 3, delay: 1000 };
const labeled = mapValues(config, (value, key) => ({
  value,
  label: String(key).charAt(0).toUpperCase() + String(key).slice(1),
}));
console.log(labeled);
// {
//   timeout: { value: 5000, label: 'Timeout' },
//   retries: { value: 3, label: 'Retries' },
//   delay: { value: 1000, label: 'Delay' }
// }

// ç¤ºä¾‹5: åµŒå¥—å¯¹è±¡è½¬æ¢
const data = {
  user1: { name: 'Alice', score: 95 },
  user2: { name: 'Bob', score: 87 },
};
const transformed = mapValues(data, (user) => ({
  ...user,
  passed: user.score >= 80,
}));
console.log(transformed);
// {
//   user1: { name: 'Alice', score: 95, passed: true },
//   user2: { name: 'Bob', score: 87, passed: true }
// }

// ç¤ºä¾‹6: å¤„ç† null/undefined
const nullObj = null;
const result = mapValues(nullObj, (value) => value * 2);
console.log(result); // {}
```

### å®é™…åº”ç”¨åœºæ™¯

```typescript
// ç¤ºä¾‹7: æ•°æ®æ ¼å¼åŒ–
function formatUserData(user: any) {
  return mapValues(user, (value, key) => {
    if (key === 'age') return `${value} years old`;
    if (key === 'created') return new Date(value).toLocaleDateString();
    return value;
  });
}

const user = { name: 'John', age: 30, created: '2024-01-01' };
const formatted = formatUserData(user);
console.log(formatted);
// { name: 'John', age: '30 years old', created: '1/1/2024' }

// ç¤ºä¾‹8: æ•°æ®éªŒè¯å’Œè½¬æ¢
function sanitizeInput(input: any) {
  return mapValues(input, (value) => {
    if (typeof value === 'string') {
      return value.trim().toLowerCase();
    }
    return value;
  });
}

const formData = { name: '  JOHN  ', email: '  JOHN@EXAMPLE.COM  ', age: 30 };
const sanitized = sanitizeInput(formData);
console.log(sanitized);
// { name: 'john', email: 'john@example.com', age: 30 }
```

## äº¤äº’å¼ç¤ºä¾‹

```tsx live
function MapValuesExample() {
  const [obj, setObj] = React.useState(JSON.stringify({ a: 1, b: 2, c: 3 }, null, 2));
  const [transform, setTransform] = React.useState('double');
  const [result, setResult] = React.useState(null);

  const handleMapValues = () => {
    try {
      const parsed = JSON.parse(obj);
      let iteratee;

      switch (transform) {
        case 'double':
          iteratee = (value) => (typeof value === 'number' ? value * 2 : value);
          break;
        case 'toString':
          iteratee = (value) => String(value);
          break;
        case 'addTen':
          iteratee = (value) => (typeof value === 'number' ? value + 10 : value);
          break;
        default:
          iteratee = (value) => value;
      }

      const mapped = mapValues(parsed, iteratee);
      setResult(mapped);
    } catch (error) {
      setResult({ error: error.message });
    }
  };

  React.useEffect(() => {
    handleMapValues();
  }, [obj, transform]);

  return (
    <div style={{ padding: '20px', background: '#f5f5f5', borderRadius: '8px' }}>
      <h4>mapValues äº¤äº’å¼ç¤ºä¾‹</h4>
      <div style={{ marginBottom: '15px' }}>
        <label style={{ display: 'block', marginBottom: '5px' }}>è¾“å…¥å¯¹è±¡ (JSON):</label>
        <textarea
          value={obj}
          onChange={(e) => setObj(e.target.value)}
          style={{ width: '100%', height: '100px', padding: '8px', boxSizing: 'border-box', fontFamily: 'monospace' }}
        />
      </div>
      <div style={{ marginBottom: '15px' }}>
        <label style={{ display: 'block', marginBottom: '5px' }}>è½¬æ¢æ–¹å¼:</label>
        <select value={transform} onChange={(e) => setTransform(e.target.value)} style={{ padding: '8px' }}>
          <option value="double">ä¹˜ä»¥ 2</option>
          <option value="toString">è½¬ä¸ºå­—ç¬¦ä¸²</option>
          <option value="addTen">åŠ  10</option>
        </select>
      </div>
      <div>
        <strong>è½¬æ¢ç»“æœ:</strong>
        <pre
          style={{
            background: 'white',
            padding: '10px',
            marginTop: '5px',
            overflow: 'auto',
            fontSize: '12px',
            color: '#0066cc',
          }}
        >
          {result && (result.error ? `Error: ${result.error}` : JSON.stringify(result, null, 2))}
        </pre>
      </div>
    </div>
  );
}
```

## æ³¨æ„äº‹é¡¹

- âš ï¸ **æ–°å¯¹è±¡**: è¿”å›æ–°å¯¹è±¡ï¼Œä¸ä¿®æ”¹åŸå¯¹è±¡
- âš ï¸ **å€¼è½¬æ¢**: è¿­ä»£å‡½æ•°æ¥æ”¶å€¼ã€é”®å’ŒåŸå¯¹è±¡ä¸‰ä¸ªå‚æ•°
- âš ï¸ **Null å¤„ç†**: å¦‚æœå¯¹è±¡ä¸º `null` æˆ– `undefined`ï¼Œè¿”å›ç©ºå¯¹è±¡
- ğŸ’¡ **æ€§èƒ½æç¤º**: è¯¥å‡½æ•°å…·æœ‰ O(n) æ—¶é—´å¤æ‚åº¦ï¼Œå…¶ä¸­ n æ˜¯å±æ€§æ•°é‡
- ğŸ“š **æœ€ä½³å®è·µ**: å¸¸ç”¨äºæ•°æ®æ ¼å¼åŒ–ã€éªŒè¯å’Œè½¬æ¢

## ç›¸å…³å‡½æ•°

- [`mapKeys`](./mapKeys) - æ˜ å°„å¯¹è±¡çš„é”®
- [`values`](./values) - è·å–å¯¹è±¡çš„æ‰€æœ‰å€¼
- [`entries`](./entries) - è·å–å¯¹è±¡çš„é”®å€¼å¯¹æ•°ç»„
- [`pick`](./pick) - åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼ŒåªåŒ…å«æŒ‡å®šé”®çš„å±æ€§

## ç‰ˆæœ¬å†å²

- **v1.0.0** - åˆå§‹ç‰ˆæœ¬
