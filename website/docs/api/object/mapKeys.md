---
id: mapKeys
title: mapKeys
description: 'Creates an object with the same values as object and keys generated by running each property through iteratee'
---

# `mapKeys`

åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œé€šè¿‡è¿­ä»£å‡½æ•°è½¬æ¢æ¯ä¸ªå±æ€§çš„é”®åï¼Œä¿æŒå€¼ä¸å˜ã€‚

## è¯­æ³•

```typescript
function mapKeys<T extends object, K extends string | number | symbol>(
  obj: T,
  iteratee: (value: T[keyof T], key: keyof T, obj: T) => K,
): Record<K, T[keyof T]>;
```

## å‚æ•°

| å‚æ•°å     | ç±»å‹                     | å¿…å¡« | é»˜è®¤å€¼ | æè¿°                           |
| ---------- | ------------------------ | ---- | ------ | ------------------------------ |
| `obj`      | `T extends object`       | âœ…   | -      | æºå¯¹è±¡                         |
| `iteratee` | `(value, key, obj) => K` | âœ…   | -      | ä¸ºæ¯ä¸ªå±æ€§ç”Ÿæˆæ–°é”®åçš„è¿­ä»£å‡½æ•° |

## è¿”å›å€¼

- **ç±»å‹**: `Record<K, T[keyof T]>`
- **æè¿°**: é”®åå·²è½¬æ¢çš„æ–°å¯¹è±¡

## ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•

```typescript
import { mapKeys } from '@rabjs/kit';

// ç¤ºä¾‹1: è½¬æ¢ä¸ºå¤§å†™é”®å
const obj = { firstName: 'John', lastName: 'Doe', age: 30 };
const uppercase = mapKeys(obj, (_, key) => String(key).toUpperCase());
console.log(uppercase);
// { FIRSTNAME: 'John', LASTNAME: 'Doe', AGE: 30 }

// ç¤ºä¾‹2: è½¬æ¢ä¸ºé©¼å³°å‘½å
const snakeCase = { first_name: 'John', last_name: 'Doe', user_age: 30 };
const camelCase = mapKeys(snakeCase, (_, key) => {
  return String(key).replace(/_([a-z])/g, (_, char) => char.toUpperCase());
});
console.log(camelCase);
// { firstName: 'John', lastName: 'Doe', userAge: 30 }

// ç¤ºä¾‹3: æ·»åŠ å‰ç¼€
const config = { host: 'localhost', port: 3000 };
const prefixed = mapKeys(config, (_, key) => `APP_${key}`);
console.log(prefixed);
// { APP_host: 'localhost', APP_port: 3000 }
```

### é«˜çº§ç”¨æ³•

```typescript
// ç¤ºä¾‹4: åŸºäºå€¼çš„é”®è½¬æ¢
const data = { 1: 'one', 2: 'two', 3: 'three' };
const transformed = mapKeys(data, (value) => `num_${value}`);
console.log(transformed);
// { num_one: 'one', num_two: 'two', num_three: 'three' }

// ç¤ºä¾‹5: æ¡ä»¶é”®è½¬æ¢
const fields = { email: 'user@example.com', password: 'secret', name: 'John' };
const sanitized = mapKeys(fields, (_, key) => {
  return key === 'password' ? 'pwd' : key;
});
console.log(sanitized);
// { email: 'user@example.com', pwd: 'secret', name: 'John' }

// ç¤ºä¾‹6: å¤„ç† null/undefined
const nullObj = null;
const result = mapKeys(nullObj, (_, key) => `${key}_mapped`);
console.log(result); // {}
```

### å®é™…åº”ç”¨åœºæ™¯

```typescript
// ç¤ºä¾‹7: API å“åº”å­—æ®µè½¬æ¢
function normalizeApiResponse(response: any) {
  return mapKeys(response, (_, key) => {
    // Convert snake_case to camelCase
    return String(key).replace(/_([a-z])/g, (_, char) => char.toUpperCase());
  });
}

const apiResponse = { user_id: 123, user_name: 'John', created_at: '2024-01-01' };
const normalized = normalizeApiResponse(apiResponse);
console.log(normalized);
// { userId: 123, userName: 'John', createdAt: '2024-01-01' }

// ç¤ºä¾‹8: æ•°æ®åº“å­—æ®µæ˜ å°„
function mapDatabaseFields(record: any, fieldMap: any) {
  return mapKeys(record, (_, key) => fieldMap[String(key)] || String(key));
}

const dbRecord = { id: 1, nm: 'Product', pr: 99.99 };
const fieldMapping = { id: 'productId', nm: 'productName', pr: 'price' };
const mapped = mapDatabaseFields(dbRecord, fieldMapping);
console.log(mapped);
// { productId: 1, productName: 'Product', price: 99.99 }
```

## äº¤äº’å¼ç¤ºä¾‹

```tsx live
function MapKeysExample() {
  const [obj, setObj] = React.useState(JSON.stringify({ firstName: 'John', lastName: 'Doe', age: 30 }, null, 2));
  const [transform, setTransform] = React.useState('toUpperCase');
  const [result, setResult] = React.useState(null);

  const handleMapKeys = () => {
    try {
      const parsed = JSON.parse(obj);
      let iteratee;

      switch (transform) {
        case 'toUpperCase':
          iteratee = (_, key) => String(key).toUpperCase();
          break;
        case 'toLowerCase':
          iteratee = (_, key) => String(key).toLowerCase();
          break;
        case 'addPrefix':
          iteratee = (_, key) => `APP_${key}`;
          break;
        default:
          iteratee = (_, key) => key;
      }

      const mapped = mapKeys(parsed, iteratee);
      setResult(mapped);
    } catch (error) {
      setResult({ error: error.message });
    }
  };

  React.useEffect(() => {
    handleMapKeys();
  }, [obj, transform]);

  return (
    <div style={{ padding: '20px', background: '#f5f5f5', borderRadius: '8px' }}>
      <h4>mapKeys äº¤äº’å¼ç¤ºä¾‹</h4>
      <div style={{ marginBottom: '15px' }}>
        <label style={{ display: 'block', marginBottom: '5px' }}>è¾“å…¥å¯¹è±¡ (JSON):</label>
        <textarea
          value={obj}
          onChange={(e) => setObj(e.target.value)}
          style={{ width: '100%', height: '100px', padding: '8px', boxSizing: 'border-box', fontFamily: 'monospace' }}
        />
      </div>
      <div style={{ marginBottom: '15px' }}>
        <label style={{ display: 'block', marginBottom: '5px' }}>è½¬æ¢æ–¹å¼:</label>
        <select value={transform} onChange={(e) => setTransform(e.target.value)} style={{ padding: '8px' }}>
          <option value="toUpperCase">è½¬ä¸ºå¤§å†™</option>
          <option value="toLowerCase">è½¬ä¸ºå°å†™</option>
          <option value="addPrefix">æ·»åŠ å‰ç¼€</option>
        </select>
      </div>
      <div>
        <strong>è½¬æ¢ç»“æœ:</strong>
        <pre
          style={{
            background: 'white',
            padding: '10px',
            marginTop: '5px',
            overflow: 'auto',
            fontSize: '12px',
            color: '#0066cc',
          }}
        >
          {result && (result.error ? `Error: ${result.error}` : JSON.stringify(result, null, 2))}
        </pre>
      </div>
    </div>
  );
}
```

## æ³¨æ„äº‹é¡¹

- âš ï¸ **æ–°å¯¹è±¡**: è¿”å›æ–°å¯¹è±¡ï¼Œä¸ä¿®æ”¹åŸå¯¹è±¡
- âš ï¸ **é”®åè½¬æ¢**: è¿­ä»£å‡½æ•°æ¥æ”¶å€¼ã€é”®å’ŒåŸå¯¹è±¡ä¸‰ä¸ªå‚æ•°
- âš ï¸ **Null å¤„ç†**: å¦‚æœå¯¹è±¡ä¸º `null` æˆ– `undefined`ï¼Œè¿”å›ç©ºå¯¹è±¡
- ğŸ’¡ **æ€§èƒ½æç¤º**: è¯¥å‡½æ•°å…·æœ‰ O(n) æ—¶é—´å¤æ‚åº¦ï¼Œå…¶ä¸­ n æ˜¯å±æ€§æ•°é‡
- ğŸ“š **æœ€ä½³å®è·µ**: å¸¸ç”¨äº API å“åº”è½¬æ¢å’Œå­—æ®µæ˜ å°„

## ç›¸å…³å‡½æ•°

- [`mapValues`](./mapValues) - æ˜ å°„å¯¹è±¡çš„å€¼
- [`keys`](./keys) - è·å–å¯¹è±¡çš„æ‰€æœ‰é”®
- [`entries`](./entries) - è·å–å¯¹è±¡çš„é”®å€¼å¯¹æ•°ç»„
- [`invert`](./invert) - åè½¬å¯¹è±¡çš„é”®å€¼

## ç‰ˆæœ¬å†å²

- **v0.0.1** - åˆå§‹ç‰ˆæœ¬
